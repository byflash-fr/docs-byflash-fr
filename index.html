<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Byflash | Editeur de texte</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="shortcut icon" href="assets/logo.ico" type="image/x-icon">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-left">
            <div class="logo">üìù</div>
            <div class="brand">
                <h1>Byflash Editor</h1>
                <p>Professional Document Editor</p>
            </div>
        </div>
        <div class="header-right">
            <input type="text" id="documentTitle" placeholder="Document title" value="Untitled Document">
            <button class="btn btn-primary" onclick="newDocument()">
                <svg class="icon" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                Nouveau
            </button>
            <button class="btn btn-primary" id="logoutBtn" onclick="logout()">D√©connexion</button>
        </div>
    </header>

    <!-- Toolbar -->
    <div class="toolbar">
        <button class="toolbar-btn" onclick="saveDocument()" title="Enregistrer">
            <svg class="icon" viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
        </button>
        <button class="toolbar-btn" onclick="openDocumentList()" title="Ouvrir">
            <svg class="icon" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>
        </button>
        <button class="toolbar-btn" onclick="openImportDialog()" title="Importer">
            <svg class="icon" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>
        </button>

        <div class="separator"></div>

        <button class="toolbar-btn" onclick="document.execCommand('undo')" title="Annuler">
            <svg class="icon" viewBox="0 0 24 24"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>
        </button>
        <button class="toolbar-btn" onclick="document.execCommand('redo')" title="Refaire">
            <svg class="icon" viewBox="0 0 24 24"><polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path></svg>
        </button>

        <div class="separator"></div>

        <button class="toolbar-btn" onclick="document.execCommand('bold')" title="Gras">
            <svg class="icon" viewBox="0 0 24 24"><path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path></svg>
        </button>
        <button class="toolbar-btn" onclick="document.execCommand('italic')" title="Italique">
            <svg class="icon" viewBox="0 0 24 24"><line x1="19" y1="4" x2="10" y2="4"></line><line x1="14" y1="20" x2="5" y2="20"></line><line x1="15" y1="4" x2="9" y2="20"></line></svg>
        </button>
        <button class="toolbar-btn" onclick="document.execCommand('underline')" title="Soulign√©">
            <svg class="icon" viewBox="0 0 24 24"><path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"></path><line x1="4" y1="21" x2="20" y2="21"></line></svg>
        </button>

        <div class="separator"></div>

        <select onchange="document.execCommand('fontSize', false, this.value); this.value='3'">
            <option value="1">8pt</option>
            <option value="2">10pt</option>
            <option value="3" selected>12pt</option>
            <option value="4">14pt</option>
            <option value="5">18pt</option>
            <option value="6">24pt</option>
            <option value="7">36pt</option>
        </select>

        <div class="separator"></div>

        <button class="toolbar-btn" onclick="addTextToPDF()" title="Ajouter du texte">
            <svg class="icon" viewBox="0 0 24 24"><path d="M4 7V4h16v3M9 20h6M12 4v16"/></svg>
        </button>
        <button class="toolbar-btn" onclick="addImageToPDF()" title="Ajouter une image">
            <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
        </button>
        <button class="toolbar-btn" onclick="addTableToPDF()" title="Ajouter un tableau">
            <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="3" y1="15" x2="21" y2="15"/><line x1="9" y1="3" x2="9" y2="21"/><line x1="15" y1="3" x2="15" y2="21"/></svg>
        </button>
        <button class="toolbar-btn" onclick="addDrawingToPDF()" title="Dessiner">
            <svg class="icon" viewBox="0 0 24 24"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="M2 2l7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg>
        </button>

        <div class="separator"></div>

        <button class="toolbar-btn" onclick="document.execCommand('justifyLeft')" title="Aligner √† gauche">
            <svg class="icon" viewBox="0 0 24 24"><line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line></svg>
        </button>
        <button class="toolbar-btn" onclick="document.execCommand('justifyCenter')" title="Centrer">
            <svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="10" x2="6" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="18" y1="18" x2="6" y2="18"></line></svg>
        </button>
        <button class="toolbar-btn" onclick="document.execCommand('justifyRight')" title="Aligner √† droite">
            <svg class="icon" viewBox="0 0 24 24"><line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line></svg>
        </button>
        <button class="toolbar-btn" onclick="document.execCommand('justifyFull')" title="Justifier">
            <svg class="icon" viewBox="0 0 24 24"><line x1="21" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="3" y2="18"></line></svg>
        </button>

        <div class="separator"></div>

        <button class="toolbar-btn" onclick="document.execCommand('insertUnorderedList')" title="Liste √† puces">
            <svg class="icon" viewBox="0 0 24 24"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
        </button>
        <button class="toolbar-btn" onclick="document.execCommand('insertOrderedList')" title="Liste num√©rot√©e">
            <svg class="icon" viewBox="0 0 24 24"><line x1="10" y1="6" x2="21" y2="6"></line><line x1="10" y1="12" x2="21" y2="12"></line><line x1="10" y1="18" x2="21" y2="18"></line><path d="M4 6h1v4"></path><path d="M4 10h2"></path><path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"></path></svg>
        </button>

        <div class="separator"></div>

        <select onchange="document.execCommand('foreColor', false, this.value); this.value='#000000'">
            <option value="#000000" selected>Noir</option>
            <option value="#404040">Gris fonc√©</option>
            <option value="#808080">Gris</option>
            <option value="#C0C0C0">Gris clair</option>
            <option value="#FFFFFF">Blanc</option>
        </select>

        <div class="separator"></div>

        <div class="export-menu">
            <button class="btn btn-primary" onclick="toggleExportMenu()">
                <svg class="icon" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                Exporter
                <svg class="icon" viewBox="0 0 24 24" style="width: 14px; height: 14px;"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
            <div class="export-dropdown" id="exportMenu">
                <button onclick="exportDocument('pdf')">Exporter en PDF</button>
                <button onclick="exportDocument('docx')">Exporter en DOCX</button>
            </div>
        </div>
    </div>

    <!-- Editor -->
    <div class="editor-container">
        <div class="page">
            <div id="editor" contenteditable="true"></div>
        </div>
    </div>

    <!-- PDF Viewer -->
    <div id="pdfViewer" style="display: none;">
        <div class="pdf-toolbar">
            <button class="toolbar-btn" onclick="addTextToPDF()" title="Ajouter du texte">
                <svg class="icon" viewBox="0 0 24 24"><path d="M4 7V4h16v3M9 20h6M12 4v16"/></svg>
            </button>
            <button class="toolbar-btn" onclick="addImageToPDF()" title="Ajouter une image">
                <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
            </button>
            <button class="toolbar-btn" onclick="addTableToPDF()" title="Ajouter un tableau">
                <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="3" y1="15" x2="21" y2="15"/><line x1="9" y1="3" x2="9" y2="21"/><line x1="15" y1="3" x2="15" y2="21"/></svg>
            </button>
            <button class="toolbar-btn" onclick="addDrawingToPDF()" title="Dessiner">
                <svg class="icon" viewBox="0 0 24 24"><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="M2 2l7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg>
            </button>
            <div class="separator"></div>
            <select id="pdfFontSize" class="pdf-control">
                <option value="12">12pt</option>
                <option value="14">14pt</option>
                <option value="16" selected>16pt</option>
                <option value="18">18pt</option>
                <option value="20">20pt</option>
                <option value="24">24pt</option>
            </select>
            <input type="color" id="pdfTextColor" value="#000000" class="pdf-control" title="Couleur du texte">
            <div class="separator"></div>
            <button class="toolbar-btn" onclick="deleteSelectedElement()" title="Supprimer l'√©l√©ment s√©lectionn√©">
                <svg class="icon" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
            </button>
            <button class="btn btn-primary" onclick="savePDFChanges()" style="margin-left: auto;">
                <svg class="icon" viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                Enregistrer PDF
            </button>
        </div>
        <div id="pdfContainer" class="pdf-container"></div>
    </div>

    <input type="file" id="imageInput" accept="image/*" class="hidden" onchange="handleImageUpload(event)">

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Connexion</h2>
            </div>
            <div class="modal-body">
                <form class="auth-form" onsubmit="handleAuth(event)">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="authEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Mot de passe</label>
                        <input type="password" id="authPassword" required>
                    </div>
                    <button type="submit" class="btn-full" id="authSubmitBtn">Se connecter</button>
                </form>
                <div class="text-center">
                    <span id="authToggleText">Pas de compte ?</span>
                    <button class="link-btn" onclick="toggleAuthMode()">S'inscrire</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Document List Modal -->
    <div class="modal" id="documentListModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Mes documents</h2>
                <button class="close-btn" onclick="closeDocumentList()">√ó</button>
            </div>
            <div class="modal-body">
                <div id="documentList" class="doc-list"></div>
            </div>
        </div>
    </div>

    <!-- Import Dialog -->
    <div class="modal" id="importModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Importer un fichier</h2>
                <button class="close-btn" onclick="closeImportDialog()">√ó</button>
            </div>
            <div class="modal-body">
                <p style="color: #6b7280; margin-bottom: 16px;">
                    S√©lectionnez un fichier √† importer. Formats support√©s : TXT, DOCX, PDF
                </p>
                <input type="file" id="importFileInput" accept=".txt,.docx,.pdf" class="hidden" onchange="handleFileImport(event)">
                <button class="btn-full" onclick="document.getElementById('importFileInput').click()">
                    <svg class="icon" viewBox="0 0 24 24" style="display: inline-block; margin-right: 8px;"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                    Choisir un fichier
                </button>
                <div class="import-info">
                    <p>Formats support√©s :</p>
                    <ul>
                        <li>üìÑ .txt - Fichiers texte</li>
                        <li>üìÑ .docx - Documents Word</li>
                        <li>üìÑ .pdf - Documents PDF</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/7.8.2/docx.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

    <script>
        
    </script>
</body>
</html>